---
name: UUID Migration - Database Schema Conversion
status: closed
created: 2026-01-13T14:41:59Z
updated: 2026-01-13T15:02:30Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: false
---

# Task: UUID Migration - Database Schema Conversion

## Description

Update all 12 existing CREATE TABLE migrations to use native PostgreSQL UUID type with gen_random_uuid() defaults from the start, then reset database and apply migrations. Since we're in development phase, this approach gives us a clean migration history instead of creating an ALTER TABLE conversion migration.

**Approach:** Development phase clean-slate strategy
- Update existing base migrations to use UUID
- Drop all tables in remote Supabase
- Reapply migrations with `supabase db push`

## Checklist

- [x] Updated all 12 CREATE TABLE migrations to use UUID instead of VARCHAR(255)
- [x] Added `CREATE EXTENSION IF NOT EXISTS pgcrypto` to first migration
- [x] Converted all primary key columns (id) to UUID with DEFAULT gen_random_uuid()
- [x] Converted all foreign key columns (user_id, client_id, created_by, assigned_to, uploaded_by) to UUID
- [x] Updated COMMENT statements to reflect UUID type
- [x] Deleted conflicting migration file (20260112144552_fix_auth_tables_id_defaults.sql)
- [x] Dropped all tables in remote Supabase database
- [x] Applied migrations with `supabase db push` - SUCCESS
- [x] Verified UUID columns created correctly
- [x] Updated `.claude/database/database.dbml` to reflect UUID types (completed previously)
- [x] All migration checks passing

## Reference

See epic.md sections:
- "Part 1: UUID Migration (Database Layer)" for complete migration SQL
- "Migration Steps Phase 1: Step 1-3" for validation and application steps
- "Architecture Decisions #1" for rationale and migration impact

## Dependencies

None - This is the foundation task that other tasks depend on

## Effort: Medium (3-4 hours)
