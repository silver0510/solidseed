---
name: Document Management API
status: open
created: 2026-01-12T04:48:34Z
updated: 2026-01-12T04:48:34Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 002]
parallel: true
---

# Task: Document Management API

## Description

Implement document upload, download (signed URLs), and deletion with Supabase Storage integration.

## Checklist

- [ ] Create DocumentService class with Supabase Storage integration
- [ ] Implement POST /api/clients/:id/documents (multipart upload)
- [ ] Implement GET /api/clients/:id/documents/:docId/download (signed URL)
- [ ] Implement DELETE /api/clients/:id/documents/:docId (storage + DB)
- [ ] Add file type validation (PDF, DOC, DOCX, JPG, PNG)
- [ ] Add file size validation (max 10MB)
- [ ] Add upload progress tracking support
- [ ] Add rollback on DB error (delete from storage)
- [ ] Tests written (TDD: before implementation, or after)
- [ ] All tests passing
- [ ] Code reviewed

## Reference

See epic.md sections:
- "API Endpoints" for document endpoint specifications
- "Service Integration Code > DocumentService" for implementation
- "Supabase Storage Configuration" for file path structure

## Dependencies

- Task 001 (Database Schema) must complete first
- Task 002 (Supabase Storage Setup) must complete first
- Can run in parallel with Tasks 003 and 004

## Effort: Medium (4 hours)
