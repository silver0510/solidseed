---
name: Document Management API
status: in-progress
created: 2026-01-12T04:48:34Z
updated: 2026-01-15T12:58:12Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 002]
parallel: true
---

# Task: Document Management API

## Description

Implement document upload, download (signed URLs), and deletion with Supabase Storage integration.

## Checklist

- [x] Create DocumentService class with Supabase Storage integration
- [x] Implement POST /api/clients/:id/documents (multipart upload)
- [x] Implement GET /api/clients/:id/documents/:docId/download (signed URL)
- [x] Implement DELETE /api/clients/:id/documents/:docId (storage + DB)
- [x] Add file type validation (PDF, DOC, DOCX, JPG, PNG)
- [x] Add file size validation (max 10MB)
- [ ] Add upload progress tracking support (client-side implementation needed)
- [x] Add rollback on DB error (delete from storage)
- [x] Tests written (TDD: before implementation, or after)
- [x] All tests passing
- [ ] Code reviewed

## Reference

See epic.md sections:
- "API Endpoints" for document endpoint specifications
- "Service Integration Code > DocumentService" for implementation
- "Supabase Storage Configuration" for file path structure

## Dependencies

- Task 001 (Database Schema) must complete first
- Task 002 (Supabase Storage Setup) must complete first
- Can run in parallel with Tasks 003 and 004

## Effort: Medium (4 hours)
