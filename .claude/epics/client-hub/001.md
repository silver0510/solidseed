---
name: Database Schema & Migrations
status: closed
created: 2026-01-12T04:48:34Z
updated: 2026-01-13T02:01:26Z
github: [Will be updated when synced to GitHub]
depends_on: []
parallel: false
---

# Task: Database Schema & Migrations

## Description

Create Supabase migrations for all 5 Client Hub tables (clients, client_tags, client_documents, client_notes, client_tasks) with RLS policies, indexes, and triggers.

## Checklist

- [ ] Create migration file for clients table with search vector trigger
- [ ] Create migration file for client_tags table
- [ ] Create migration file for client_documents table
- [ ] Create migration file for client_notes table
- [ ] Create migration file for client_tasks table
- [ ] Create migration file for all RLS policies
- [ ] Run `supabase db push` to apply migrations
- [ ] Verify tables created in Supabase dashboard
- [ ] Test RLS policies with authenticated user
- [ ] Update `.claude/database/database.dbml` with new tables
- [ ] Tests written (TDD: before implementation, or after)
- [ ] All tests passing
- [ ] Code reviewed

## Reference

See epic.md sections:
- "Database Schema" for complete SQL including tables, indexes, triggers
- "ROW LEVEL SECURITY POLICIES" for all RLS policy definitions
- "DBML Addition" for database.dbml update content

## Dependencies

- User Authentication Epic must be complete (users table exists)
- Supabase project configured with `SUPABASE_DATABASE_URL`

## Effort: Medium (4 hours)
