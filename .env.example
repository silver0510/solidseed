# =============================================================================
# Korella CRM Environment Configuration
# =============================================================================
# Copy this file to .env.local and fill in your values
# Never commit .env.local to version control

# =============================================================================
# Application
# =============================================================================
NODE_ENV=development
BETTER_AUTH_URL=http://localhost:3000

# =============================================================================
# Supabase Database
# =============================================================================
# Get these from: https://app.supabase.com > Your Project > Settings > API
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Direct database connection (Settings > Database > Connection string)
# Used by Better Auth for direct PostgreSQL access
SUPABASE_DATABASE_URL=postgresql://postgres:[password]@db.your-project.supabase.co:5432/postgres

# Service role key for server-side operations (keep secret!)
# Only use on server-side, never expose to client
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# =============================================================================
# Authentication (Better Auth)
# =============================================================================
# Base URL of the application (for OAuth redirects and email links)
BETTER_AUTH_URL=http://localhost:3000

# Secret key for JWT signing and encryption (minimum 32 characters)
# Generate with: openssl rand -base64 32
# IMPORTANT: Keep this secret and never commit to version control
BETTER_AUTH_SECRET=your-secret-minimum-32-characters-long

# JWT Configuration (optional - defaults shown)
# JWT_TOKEN_EXPIRY=3d (default: 3 days)
# JWT_REFRESH_TOKEN_EXPIRY=30d (default: 30 days for "remember me")
# JWT_ALGORITHM=HS256 (default: HS256)

# =============================================================================
# OAuth - Google
# =============================================================================
# Setup: https://console.cloud.google.com/ > APIs & Services > Credentials
# See Task 008 documentation for detailed setup instructions
#
# Callback URLs to configure in Google Cloud Console:
#   Development: http://localhost:3000/api/auth/callback/google
#   Production: https://your-domain.com/api/auth/callback/google
#
# Scopes required: email, profile
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# =============================================================================
# Email Service (Resend)
# =============================================================================
# Get API key from: https://resend.com/api-keys
# Used for:
# - Email verification (24-hour expiration)
# - Password reset (1-hour expiration)
# - Password change confirmation
# - Account lockout security alerts
RESEND_API_KEY=re_your_api_key

# Sender email address
# Development: Use Resend's test sender (no domain verification needed)
# Production: Use your verified domain (e.g., noreply@korella.com)
RESEND_FROM_EMAIL=onboarding@resend.dev

# Email retry configuration (optional - defaults shown)
# EMAIL_RETRY_MAX_ATTEMPTS=3
# EMAIL_RETRY_INITIAL_DELAY_MS=1000
# EMAIL_RETRY_MAX_DELAY_MS=10000

# Production Email Setup Checklist:
# 1. Verify your domain in Resend dashboard
# 2. Add SPF record: v=spf1 include:_spf.resend.com ~all
# 3. Add DKIM records (provided by Resend)
# 4. Update RESEND_FROM_EMAIL to your verified domain

# =============================================================================
# Rate Limiting (optional)
# =============================================================================
# Redis URL for distributed rate limiting
# Falls back to in-memory rate limiting if not set
#
# Rate limits configured:
# - Login: 10 attempts per minute per IP address
# - Password Reset: 3 attempts per hour per email address
# - Account Lockout: 5 failed attempts triggers 30-minute lock
# REDIS_URL=redis://localhost:6379

# =============================================================================
# Security Configuration
# =============================================================================
# Bcrypt cost factor for password hashing (default: 12)
# Higher values are more secure but slower (recommended: 10-12)
# BCRYPT_COST_FACTOR=12

# Password complexity requirements (default: all enabled)
# PASSWORD_MIN_LENGTH=8
# PASSWORD_REQUIRE_UPPERCASE=true
# PASSWORD_REQUIRE_LOWERCASE=true
# PASSWORD_REQUIRE_NUMBER=true
# PASSWORD_REQUIRE_SYMBOL=true

# Account lockout configuration (default: 5 attempts, 30-minute lock)
# MAX_FAILED_LOGIN_ATTEMPTS=5
# LOCKOUT_DURATION_MINUTES=30

# Email verification token expiration (default: 24 hours)
# EMAIL_VERIFICATION_EXPIRATION_HOURS=24

# Password reset token expiration (default: 1 hour)
# PASSWORD_RESET_EXPIRATION_HOURS=1

# =============================================================================
# Sentry Monitoring (optional)
# =============================================================================
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_AUTH_TOKEN=your_auth_token
SENTRY_ORG=your-org
SENTRY_PROJECT=your-project

# =============================================================================
# Vercel (auto-set in production)
# =============================================================================
# These are automatically set by Vercel during deployment
# VERCEL_URL=auto-generated
# VERCEL_ENV=auto-generated
# VERCEL_GIT_COMMIT_SHA=auto-generated
# VERCEL_OIDC_TOKEN=auto-generated
